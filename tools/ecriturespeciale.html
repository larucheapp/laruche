<!DOCTYPE html>
<html lang="fr" data-app="laruche" >
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>√âcritures Sp√©ciales - La Ruche</title>
  <meta name="description" content="Transformez votre texte avec des polices originales et copiez-les facilement pour vos r√©seaux sociaux.">
  <style>
    :root{
      --color-bg:#FFFFFF;
      --color-bg-alt:#F7F8FA;
      --color-border:#E9EAF0;
      --color-text-primary:#141417;
      --color-text-secondary:#6B7280;
      --color-violet:#7C3AED;
      --color-violet-dark:#6D28D9;
      --radius-md:12px;
      --radius-lg:14px;
      --tool-max-w:480px; /* par d√©faut, peut √™tre chang√© via body[data-size] */
    }

    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    html{height:100%;background-color:var(--color-bg)}
    body{
      height:100vh; overflow:hidden; display:flex; flex-direction:column;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Inter",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";
      color:var(--color-text-primary); line-height:1.5; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    body[data-size="default"]{--tool-max-w:480px}
    body[data-size="wide"]{--tool-max-w:960px}
    body[data-size="xl"]{--tool-max-w:1200px}

    #bg-canvas{position:fixed;inset:0;width:100%;height:100%;z-index:-1}

    .app-header{
      flex-shrink:0; background:var(--color-bg-alt); border-bottom:1px solid var(--color-border);
      padding:0 24px; display:flex; align-items:center; height:70px;
    }
    .app-header a{display:inline-flex; align-items:center}
    .logo-img{height:70px; width:auto; vertical-align:middle}

    .main-content{
      flex-grow:1; display:flex; flex-direction:column;
      padding:48px 24px; overflow-y:auto;
    }
    .tool-wrapper{
      display:flex; flex-direction:column; align-items:center; position:relative;
      margin: auto;
    }
    .tool-title{
      font-size:1.75rem; font-weight:600; padding:12px 28px;
      background:linear-gradient(45deg,var(--color-violet),var(--color-violet-dark));
      color:#fff; border-radius:var(--radius-md); margin-bottom:-20px; position:relative; z-index:5;
      box-shadow:0 4px 14px -4px rgba(124,58,237,.4);
    }
    .generator-card{
      background:var(--color-bg); border:1px solid var(--color-border); border-radius:var(--radius-lg);
      padding:28px; padding-top:40px; width:100%; max-width:var(--tool-max-w);
      box-shadow:0 4px 6px -1px rgb(0 0 0 / 5%), 0 2px 4px -2px rgb(0 0 0 / 5%);
      display:flex; flex-direction:column; gap:24px;
    }
    .form-group{display:flex; flex-direction:column; gap:8px}
    .form-label{font-weight:500; color:var(--color-text-primary)}
    .form-input{
      width:100%; padding:10px 14px; border:1px solid var(--color-border); border-radius:var(--radius-md);
      font-size:1rem; color:var(--color-text-primary); background:var(--color-bg);
      transition:border-color .2s, box-shadow .2s;
    }
    .form-input:focus{outline:none; border-color:var(--color-violet); box-shadow:0 0 0 3px rgba(124,58,237,.2)}
    .actions{display:flex; justify-content:flex-end; gap:12px}
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:8px;
      font-weight:500; padding:10px 16px; border-radius:var(--radius-md); border:none; cursor:pointer;
      transition:background-color .2s, box-shadow .2s; font-size:14px;
    }
    .btn:focus-visible{outline:2px solid transparent; outline-offset:2px; box-shadow:0 0 0 3px rgba(124,58,237,.4)}
    .btn-primary{background:var(--color-violet); color:#fff}
    .btn-primary:hover:not(:disabled){background:var(--color-violet-dark)}
    .btn-primary:disabled{background:#A78BFA; cursor:not-allowed}
    .status-text{font-size:14px; color:var(--color-text-secondary); text-align:center; min-height:21px}

    /* Styles sp√©cifiques √† l'outil √âcritures Sp√©ciales */
    .results-container {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
      max-height: 500px;
      overflow-y: auto;
      padding-right: 4px;
    }
    @media (min-width: 768px) {
      .results-container {
        grid-template-columns: 1fr 1fr;
      }
    }
    
    .font-card {
      background: var(--color-bg-alt);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      transition: border-color 0.2s;
    }
    .font-card:hover {
      border-color: var(--color-violet);
    }
    
    .font-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--color-text-secondary);
      font-weight: 600;
    }
    
    .font-preview {
      font-size: 1.125rem;
      word-break: break-word;
      min-height: 28px;
      color: var(--color-text-primary);
    }

    .copy-btn {
      align-self: flex-start;
      background: white;
      border: 1px solid var(--color-border);
      color: var(--color-text-primary);
      padding: 6px 12px;
      font-size: 0.875rem;
      border-radius: var(--radius-md);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: all 0.2s;
    }
    .copy-btn:hover {
      border-color: var(--color-violet);
      color: var(--color-violet);
    }
    .copy-btn svg {
      width: 14px;
      height: 14px;
      fill: none;
      stroke: currentColor;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
    }

    /* Custom Scrollbar for results */
    .results-container::-webkit-scrollbar {
      width: 6px;
    }
    .results-container::-webkit-scrollbar-track {
      background: transparent;
    }
    .results-container::-webkit-scrollbar-thumb {
      background-color: #D1D5DB;
      border-radius: 20px;
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: var(--color-text-primary);
      color: #fff;
      padding: 10px 20px;
      border-radius: var(--radius-md);
      font-size: 14px;
      opacity: 0;
      transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.3s;
      z-index: 100;
      pointer-events: none;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    }
    .toast.visible {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
  </style>
<link rel="stylesheet" href="/index.css">
</head>
<body data-size="wide">
  <canvas id="bg-canvas"></canvas>

  <header class="app-header">
    <a href="index.html" aria-label="Accueil">
      <img src="logo-2.png" alt="Logo La Ruche" class="logo-img">
    </a>
  </header>

  <main class="main-content">
    <div class="tool-wrapper">
      <h1 class="tool-title">√âcritures Sp√©ciales</h1>

      <!-- ZONE OUTIL -->
      <div class="generator-card" role="region" aria-label="G√©n√©rateur de polices sp√©ciales">
        
        <div class="form-group">
          <label for="inputText" class="form-label">Votre texte √† transformer</label>
          <textarea 
            id="inputText" 
            class="form-input" 
            rows="3" 
            placeholder="Tapez votre texte ici..."
            autofocus
          >La Ruche</textarea>
        </div>

        <div id="resultsGrid" class="results-container">
          <!-- Les r√©sultats seront inject√©s ici par JS -->
        </div>

        <div class="status-text">Cliquez sur un style pour copier</div>
      </div>
      <!-- /ZONE OUTIL -->
    </div>
  </main>

  <div id="toast" class="toast">Texte copi√© dans le presse-papier !</div>

  <script>
    // Background hex grid ‚Äî NE PAS MODIFIER (doit rester visuellement identique)
    (function(){
      const c = document.getElementById('bg-canvas');
      const ctx = c.getContext('2d');
      function draw(){
        const dpr = window.devicePixelRatio || 1;
        const rect = c.getBoundingClientRect();
        c.width = rect.width * dpr; c.height = rect.height * dpr;
        ctx.setTransform(dpr,0,0,dpr,0,0);
        ctx.clearRect(0,0,rect.width,rect.height);

        const size = 24;                         // identique
        const hexW = 2 * size;                   // identique
        const hexH = Math.sqrt(3) * size;        // identique
        const stepX = hexW * 3/4;                // identique
        ctx.strokeStyle = 'rgba(124,58,237,0.10)'; // identique
        ctx.lineWidth = 1;                       // identique

        for(let row=0; row*hexH < rect.height + hexH; row++){
          for(let col=0; col*stepX < rect.width + hexW; col++){
            const x = col * stepX;
            const y = row * hexH + (col % 2 ? hexH/2 : 0);
            ctx.beginPath();
            for(let i=0;i<6;i++){
              const a = 2 * Math.PI / 6 * i;
              const px = x + size * Math.cos(a);
              const py = y + size * Math.sin(a);
              if(i===0) ctx.moveTo(px,py); else ctx.lineTo(px,py);
            }
            ctx.closePath(); ctx.stroke();
          }
        }
      }
      window.addEventListener('resize', draw, {passive:true});
      draw();
    })();

    // LOGIQUE SP√âCIFIQUE √Ä L'OUTIL
    (function() {
      const inputText = document.getElementById('inputText');
      const resultsGrid = document.getElementById('resultsGrid');
      const toast = document.getElementById('toast');

      // Dictionnaires de caract√®res
      const chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      
      const styles = [
        {
          name: "Gras (Serif)",
          map: "ùêöùêõùêúùêùùêûùêüùê†ùê°ùê¢ùê£ùê§ùê•ùê¶ùêßùê®ùê©ùê™ùê´ùê¨ùê≠ùêÆùêØùê∞ùê±ùê≤ùê≥ùêÄùêÅùêÇùêÉùêÑùêÖùêÜùêáùêàùêâùêäùêãùêåùêçùêéùêèùêêùêëùêíùêìùêîùêïùêñùêóùêòùêôùüéùüèùüêùüëùüíùüìùüîùüïùüñùüó"
        },
        {
          name: "Gras (Sans-Serif)",
          map: "ùóÆùóØùó∞ùó±ùó≤ùó≥ùó¥ùóµùó∂ùó∑ùó∏ùóπùó∫ùóªùóºùóΩùóæùóøùòÄùòÅùòÇùòÉùòÑùòÖùòÜùòáùóîùóïùóñùóóùóòùóôùóöùóõùóúùóùùóûùóüùó†ùó°ùó¢ùó£ùó§ùó•ùó¶ùóßùó®ùó©ùó™ùó´ùó¨ùó≠ùü¨ùü≠ùüÆùüØùü∞ùü±ùü≤ùü≥ùü¥ùüµ"
        },
        {
          name: "Italique (Serif)",
          map: "ùëéùëèùëêùëëùëíùëìùëî‚Ñéùëñùëóùëòùëôùëöùëõùëúùëùùëûùëüùë†ùë°ùë¢ùë£ùë§ùë•ùë¶ùëßùê¥ùêµùê∂ùê∑ùê∏ùêπùê∫ùêªùêºùêΩùêæùêøùëÄùëÅùëÇùëÉùëÑùëÖùëÜùëáùëàùëâùëäùëãùëåùëç0123456789"
        },
        {
          name: "Italique (Sans-Serif)",
          map: "ùò¢ùò£ùò§ùò•ùò¶ùòßùò®ùò©ùò™ùò´ùò¨ùò≠ùòÆùòØùò∞ùò±ùò≤ùò≥ùò¥ùòµùò∂ùò∑ùò∏ùòπùò∫ùòªùòàùòâùòäùòãùòåùòçùòéùòèùòêùòëùòíùòìùòîùòïùòñùòóùòòùòôùòöùòõùòúùòùùòûùòüùò†ùò°0123456789"
        },
        {
          name: "Script (Cursive)",
          map: "ùí∂ùí∑ùí∏ùíπ‚ÑØùíª‚ÑäùíΩùíæùíøùìÄùìÅùìÇùìÉ‚Ñ¥ùìÖùìÜùìáùìàùìâùìäùìãùìåùìçùìéùìèùíú‚Ñ¨ùíûùíü‚Ñ∞‚Ñ±ùí¢‚Ñã‚Ñêùí•ùí¶‚Ñí‚Ñ≥ùí©ùí™ùí´ùí¨‚ÑõùíÆùíØùí∞ùí±ùí≤ùí≥ùí¥ùíµ0123456789"
        },
        {
          name: "Script Gras",
          map: "ùì™ùì´ùì¨ùì≠ùìÆùìØùì∞ùì±ùì≤ùì≥ùì¥ùìµùì∂ùì∑ùì∏ùìπùì∫ùìªùìºùìΩùìæùìøùîÄùîÅùîÇùîÉùìêùìëùìíùììùìîùìïùìñùìóùìòùìôùìöùìõùìúùìùùìûùìüùì†ùì°ùì¢ùì£ùì§ùì•ùì¶ùìßùì®ùì©0123456789"
        },
        {
          name: "Monospace",
          map: "ùöäùöãùöåùöçùöéùöèùöêùöëùöíùöìùöîùöïùöñùöóùöòùöôùööùöõùöúùöùùöûùöüùö†ùö°ùö¢ùö£ùô∞ùô±ùô≤ùô≥ùô¥ùôµùô∂ùô∑ùô∏ùôπùô∫ùôªùôºùôΩùôæùôøùöÄùöÅùöÇùöÉùöÑùöÖùöÜùöáùöàùöâùü∂ùü∑ùü∏ùüπùü∫ùüªùüºùüΩùüæùüø"
        },
        {
          name: "Double Struck",
          map: "ùïíùïìùïîùïïùïñùïóùïòùïôùïöùïõùïúùïùùïûùïüùï†ùï°ùï¢ùï£ùï§ùï•ùï¶ùïßùï®ùï©ùï™ùï´ùî∏ùîπ‚ÑÇùîªùîºùîΩùîæ‚ÑçùïÄùïÅùïÇùïÉùïÑ‚ÑïùïÜ‚Ñô‚Ñö‚Ñùùïäùïãùïåùïçùïéùïèùïê‚Ñ§ùüòùüôùüöùüõùüúùüùùüûùüüùü†ùü°"
        },
        {
          name: "Bulles (Noir)",
          map: "üÖêüÖëüÖíüÖìüÖîüÖïüÖñüÖóüÖòüÖôüÖöüÖõüÖúüÖùüÖûüÖüüÖ†üÖ°üÖ¢üÖ£üÖ§üÖ•üÖ¶üÖßüÖ®üÖ©üÖêüÖëüÖíüÖìüÖîüÖïüÖñüÖóüÖòüÖôüÖöüÖõüÖúüÖùüÖûüÖüüÖ†üÖ°üÖ¢üÖ£üÖ§üÖ•üÖ¶üÖßüÖ®üÖ©‚ìø‚ûä‚ûã‚ûå‚ûç‚ûé‚ûè‚ûê‚ûë‚ûí"
        },
        {
          name: "Bulles (Blanc)",
          map: "‚ìê‚ìë‚ìí‚ìì‚ìî‚ìï‚ìñ‚ìó‚ìò‚ìô‚ìö‚ìõ‚ìú‚ìù‚ìû‚ìü‚ì†‚ì°‚ì¢‚ì£‚ì§‚ì•‚ì¶‚ìß‚ì®‚ì©‚í∂‚í∑‚í∏‚íπ‚í∫‚íª‚íº‚íΩ‚íæ‚íø‚ìÄ‚ìÅ‚ìÇ‚ìÉ‚ìÑ‚ìÖ‚ìÜ‚ìá‚ìà‚ìâ‚ìä‚ìã‚ìå‚ìç‚ìé‚ìè‚ì™‚ë†‚ë°‚ë¢‚ë£‚ë§‚ë•‚ë¶‚ëß‚ë®"
        },
        {
          name: "Carr√©s",
          map: "üÖ∞üÖ±üÖ≤üÖ≥üÖ¥üÖµüÖ∂üÖ∑üÖ∏üâπüÖ∫üÖªüÖºüÖΩüÖæüÖøüÜÄüÜÅüÜÇüÜÉüÜÑüÜÖüÜÜüÜáüÜàüÜâüÖ∞üÖ±üÖ≤üÖ≥üÖ¥üÖµüÖ∂üÖ∑üÖ∏üâπüÖ∫üÖªüÖºüÖΩüÖæüÖøüÜÄüÜÅüÜÇüÜÉüÜÑüÜÖüÜÜüÜáüÜàüÜâ0123456789"
        },
        {
          name: "Gothique",
          map: "ùîûùîüùî†ùî°ùî¢ùî£ùî§ùî•ùî¶ùîßùî®ùî©ùî™ùî´ùî¨ùî≠ùîÆùîØùî∞ùî±ùî≤ùî≥ùî¥ùîµùî∂ùî∑ùîÑùîÖ‚Ñ≠ùîáùîàùîâùîä‚Ñå‚Ñëùîçùîéùîèùîêùîëùîíùîìùîî‚Ñúùîñùîóùîòùîôùîöùîõùîú‚Ñ®0123456789"
        },
        {
          name: "Gothique Gras",
          map: "ùñÜùñáùñàùñâùñäùñãùñåùñçùñéùñèùñêùñëùñíùñìùñîùñïùññùñóùñòùñôùñöùñõùñúùñùùñûùñüùï¨ùï≠ùïÆùïØùï∞ùï±ùï≤ùï≥ùï¥ùïµùï∂ùï∑ùï∏ùïπùï∫ùïªùïºùïΩùïæùïøùñÄùñÅùñÇùñÉùñÑùñÖ0123456789"
        },
        {
          name: "Small Caps",
          map: "·¥Ä ô·¥Ñ·¥Ö·¥á“ì…¢ ú…™·¥ä·¥ã ü·¥ç…¥·¥è·¥ò«´ Äs·¥õ·¥ú·¥†·¥°x è·¥¢·¥Ä ô·¥Ñ·¥Ö·¥á“ì…¢ ú…™·¥ä·¥ã ü·¥ç…¥·¥è·¥ò«´ Äs·¥õ·¥ú·¥†·¥°x è·¥¢0123456789"
        }
      ];

      // Cas sp√©cial pour Upside Down qui n√©cessite un reverse
      const upsideDownMap = {
        name: "Renvers√©",
        input: "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",
        output: "…êq…îp«ù…ü∆É…•ƒ±…æ ûl…Øuodb…πs án å çx éz‚àÄêêí∆Ü·ó°∆é‚Ñ≤‚ÖÅHI≈ø‚ãäÀ•WNO‘Ä√í·¥öS‚ä•‚à©ŒõMX‚ÖÑZ0∆ñ·ÑÖ∆ê„Ñ£œõ9„Ñ•86"
      };

      function transformText(text, mapString) {
        let result = "";
        for (let i = 0; i < text.length; i++) {
          const char = text[i];
          const index = chars.indexOf(char);
          if (index !== -1 && mapString[index * 2]) { // Gestion des caract√®res multi-octets (surrogate pairs)
             // La plupart des caract√®res sp√©ciaux sont sur 2 unit√©s de code UTF-16
             // Pour simplifier ici, on utilise Array.from pour g√©rer correctement les unicode
             // Mais comme mapString est une string simple, on va utiliser une approche index√©e plus robuste:
             result += getCharAtIndex(mapString, index) || char;
          } else {
            result += char;
          }
        }
        return result;
      }

      // Fonction utilitaire pour r√©cup√©rer le bon caract√®re unicode (qui peut faire 1 ou 2 length)
      // On convertit les chaines en tableau de vrais caract√®res (graphemes)
      const splitString = (str) => [...str];
      
      const stylesReady = styles.map(s => ({
        name: s.name,
        mapArray: splitString(s.map)
      }));

      function generate() {
        const text = inputText.value || inputText.placeholder;
        resultsGrid.innerHTML = "";

        // 1. Styles classiques
        stylesReady.forEach(style => {
          let converted = "";
          for (let char of text) {
            const index = chars.indexOf(char);
            if (index !== -1 && style.mapArray[index]) {
              converted += style.mapArray[index];
            } else {
              converted += char;
            }
          }
          createCard(style.name, converted);
        });

        // 2. Upside Down (Renvers√©)
        let udResult = "";
        const udInput = upsideDownMap.input;
        const udOutput = splitString(upsideDownMap.output);
        
        for (let i = text.length - 1; i >= 0; i--) {
          const char = text[i];
          const index = udInput.indexOf(char);
          if (index !== -1) {
            udResult += udOutput[index];
          } else {
            udResult += char;
          }
        }
        createCard(upsideDownMap.name, udResult);
      }

      function createCard(title, content) {
        const card = document.createElement('div');
        card.className = 'font-card';
        
        const label = document.createElement('div');
        label.className = 'font-label';
        label.textContent = title;

        const preview = document.createElement('div');
        preview.className = 'font-preview';
        preview.textContent = content;

        const btn = document.createElement('button');
        btn.className = 'copy-btn';
        btn.innerHTML = `
          <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
          Copier
        `;
        btn.onclick = () => copyToClipboard(content);

        card.appendChild(label);
        card.appendChild(preview);
        card.appendChild(btn);
        resultsGrid.appendChild(card);
      }

      function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(() => {
          showToast();
        }).catch(err => {
          console.error('Erreur copie:', err);
        });
      }

      let toastTimeout;
      function showToast() {
        toast.classList.add('visible');
        clearTimeout(toastTimeout);
        toastTimeout = setTimeout(() => {
          toast.classList.remove('visible');
        }, 2000);
      }

      // Events
      inputText.addEventListener('input', generate);
      
      // Init
      generate();
    })();
  </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>
